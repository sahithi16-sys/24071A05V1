<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<nav class="navbar navbar-dark bg-dark">
<div class="container">
<a class="navbar-brand">Shopping Cart</a>
<ul class="navbar-nav flex-row ms-auto">
<li class="nav-item me-3"><a class="nav-link active" href="login.html">Login</a></li>
<li class="nav-item me-3"><a class="nav-link" href="register.html">Register</a></li>
<li class="nav-item me-3"><a class="nav-link" href="catalog.html">Catalog</a></li>
<li class="nav-item"><a class="nav-link" href="cart.html">Cart</a></li>
</ul>
</div>
</nav>

<div class="container mt-5 col-md-5">
<div class="card shadow p-4">

<h4 class="text-center mb-3">Login</h4>

<input id="u" class="form-control mb-3" placeholder="Username">
<input id="p" type="password" class="form-control mb-3" placeholder="Password">

<button class="btn btn-dark w-100" onclick="login()">Submit</button>
<p id="msg" class="text-center fw-bold mt-2"></p>

</div>
</div>

<script>
function login(){
    if(u.value.trim()==="" || p.value.trim()===""){
    msg.innerText = "All fields are required!";
    msg.className = "text-danger fw-bold";
    return;
    }
    let users = JSON.parse(localStorage.getItem("users")) || [];

    let found = users.find(x => x.username === u.value && x.password === p.value);

    if(found){
    localStorage.setItem("loggedIn","true");
    localStorage.removeItem("cart");   // clears old cart
    window.location.href="catalog.html";
    }else{
        msg.innerText="Invalid Credentials!";
        msg.className="text-danger fw-bold";
    }
}
localStorage.removeItem("cart");
</script>

</body>
</html>